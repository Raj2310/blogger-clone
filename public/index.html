<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Blog Website</title>
  <meta name="description" content="The HTML5 Herald">
  <meta name="author" content="SitePoint">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="css/styles.css">

  <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.js"></script>
  <![endif]-->
</head>

<body>
  <div class="main-outer-container">

    <nav class="navbar navbar-default tranparent-background" id="main-nav">
      <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
         <!--  <a class="navbar-brand" href="#">Brand</a> -->
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav">

            <li><a href="/?tag=trend_feed" class="text-uppercase">Trend Feed</a></li>
            <li><a href="/?tag=gossip" class="text-uppercase">Gossip</a></li>
            <li><a href="/?tag=this_is_desi" class="text-uppercase">This is Desi</a></li>
             <li><a href="/?tag=hera_pheri" class="text-uppercase">HeraPheri</a></li>
            <li><a href="/?tag=wtf_i_go" class="text-uppercase">WTF I GO</a></li>
            
          </ul>
          <form class="navbar-form navbar-left">
            <div class="form-group">
              <input type="text" class="form-control" id="searchBar" placeholder="Search">
            </div>
            <a id="searchBtn" class="btn btn-default">Go</a>
          </form>
          <ul class="nav navbar-nav navbar-right">

            <li><a href="#"><i class="fa fa-instagram fa-2x" aria-hidden="true"></i></a></li>
            <li><a href="#"><i class="fa fa-twitter-square fa-2x" aria-hidden="true"></i></span></a></li>
            <li><a href="#"><i class="fa fa-facebook-square fa-2x" aria-hidden="true"></i></span></a></li>
          </ul>
        </div><!-- /.navbar-collapse -->
      </div><!-- /.container-fluid -->
    </nav>
    <div class="container-fluid">
      <div class="company-name">
        <center>  
           THE FOX MAGAZINE
        </center>
      </div>
     <!--  <center class="company-mantra">
        NEWSPAPER FOR CREATORS & INNOVATORS. MADE BY WITHEMES
      </center> -->
      <!--<hr class="below-company-name"/>
      <div class="editor-pick">
        <center>
          Editorsâ€™ Picks
        </center>
      </div>-->
      
      <div id="top-blog" class="hero-content">
        
      </div>
     <br/>
     <br/>
      <hr class="below-editor-pick"/>
      <div class="thumbnail-posts">
        <div class="row posts">

        </div>
        <a href="/blogs.html" class="btn btn-success pull-right space-bottom-20" >See All Posts</a>
      </div>
    </div>
  </div>
  <div class="main-outer-container" style="border-top-width:0px">
    <div class="container-fluid">
      <div class="row">
        <div class="col-lg-4 col-lg-offset-4 col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2 col-xs-12">
          <h1 class="footer-company-name">
            <center>The Fox Magazine</center>
            <hr class="below-editor-pick"/>

          </h1>
          <div>
            <center>
              <i class="fa fa-facebook-square fa-3x" aria-hidden="true"></i>
              <i class="fa fa-twitter-square fa-3x" aria-hidden="true"></i>
              <i class="fa fa-instagram  fa-3x" aria-hidden="true"></i>
            </center>
          <div>
          <div>
            <center><a href="">Contact Us</a>

          </div>
        </div>
      </div>
    </div>
  </div

  <script></script>
  <script src="js/jquery.js"></script>
  <script src="js/bootstrap.min.js"></script>
   <script type="text/javascript" src="js/moment.js"></script>
  <script>
  function param(name) {//gets parameters from the url
        return (location.search.split(name + '=')[1] || '').split('&')[0];
    }
    function getSubstring(string,size){
          return string.length>size?(string.substring(0,size))+"...":string;
    }
    $(document).ready(
        function(){
          if(param("tag")===""){
            $.get("/top-blog", function(data, status){
                if(data.status==1){
                   var on_error_string="onerror='this.onerror=null;this.src=\"https://placehold.it/380x220\";'";
                  $("#top-blog").append("<div class='row'>"+
                    "<div class='col-sm-8'> <img src='/upload/"+data.blog._id+".jpg' class='img-responsive'"+
                    on_error_string+
                     "alt='Responsive image'"+ 
                    "/></div>"+
                    "<div class='col-sm-4'>"+
                    "<div id='message' class='alert alert-success'>"+
                         "<button type='button' class='close' data-dismiss='alert'>&times;</button>"+
                        "<div id='inner-message' >"+
                            "<form method='post' action='/newsletterSignup' id='newsletterForm'>"+
                              "<div class='form-group'>"+
                                "<label for='exampleInputEmail1'>Email address</label>"+
                                "<input type='email' class='form-control' id='exampleInputEmail1' name='email' "+    
                                "placeholder='Email' required>"+
                              "</div>"+
                            "<a type='button' class='btn btn-default' onClick='submitNewsletterRequest()'>Submit</a>"+
                            "</form>"+
                        "</div>"+
                    "</div>"+
                    "</div></div>"+
                    "<div class='hero-content-body'>"+

                      "<h2><center>"+data.blog.title+"</center></h2>"+
                      "<p>"+
                      data.blog.body+
                     "</p>"+
                     "<a  href='post.html?id="+data.blog._id+"' class='pull-right content-link'>Keep Reading</a>"+
                    "</div>");
                }
            });
            $.get("/blogsAll/"+0, function(data, status){
                $.each(data, function(index, element) {
                  var img_src="/upload/"+element._id+".jpg";
                  var alt_img_src="https://placehold.it/350x150";
                  var on_error_string="onerror='this.onerror=null;this.src=\"https://placehold.it/380x220\";'"
                       $(".posts").append("   <div class='col-sm-4 col-md-3'>"+
                          "<div class='thumbnail'>"+
                        "<img  class='img-responsive thumbnail-img' src='"+img_src+"'"+on_error_string+"  alt=''>"+
                          "<div class='caption'>"+
                          "<p>"+moment(element.date).fromNow()+"</p>"+
                          "<h4><a href='post.html?id="+element._id+"'>"+getSubstring(element.title,15)+"</a></h4>"+
                          "<p>"+getSubstring(element.body,50)+"</p>"+
                          "</div>"+
                          "</div>"+
                          "</div>");
                });
            });
        }
        else{
               var tag=param("tag");
                $.get("/byTag/"+tag+"/"+0, function(data, status){
                    $.each(data, function(index, element) {
                      var img_src="/upload/"+element._id+".jpg";
                      var alt_img_src="https://placehold.it/350x150";
                      var on_error_string="onerror='this.onerror=null;this.src=\"https://placehold.it/380x220\";'"
                           $(".posts").append("   <div class='col-sm-4 col-md-3'>"+
                              "<div class='thumbnail'>"+
                            "<img  class='img-responsive thumbnail-img' src='"+img_src+"'"+on_error_string+"  alt=''>"+
                              "<div class='caption'>"+
                              "<p>"+moment(element.date).fromNow()+"</p>"+
                              "<h4><a href='post.html?id="+element._id+"'>"+getSubstring(element.title,15)+"</a></h4>"+
                              "<p>"+getSubstring(element.body,50)+"</p>"+
                              "</div>"+
                              "</div>"+
                              "</div>");
                    });
                });
        } 
        
                     
      }
    );
    $("#searchBtn").click(function(){
      var searchText=$("#searchBar").val();
      window.location.replace('blogs.html?search='+searchText);
    });
    
    function submitNewsletterRequest(){
      var frm = $('#newsletterForm');
        $.ajax({
            type: frm.attr('method'),
            url: frm.attr('action'),
            data: frm.serialize(),
            success: function (data) {
               $("#inner-message").html("Thank you! You are now registered to us.");
            }
        });
    }
    $(window).bind('scroll', function () {
    if ($(window).scrollTop() > 50) {
        $('#main-nav').addClass('navbar-fixed-top');
        $('#main-nav').removeClass('tranparent-background');
    } else {
        $('#main-nav').removeClass('navbar-fixed-top');
         $('#main-nav').addClass('tranparent-background');
    }
  });
  </script>
</body>
</html>